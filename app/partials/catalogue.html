
<!-- todo: definition app.css in index.html not working, need to redef here !-->
<link rel="stylesheet" href="css/app.css"/>

<div class="row tab-pane active" id="catalogue">

    <div class="col-md-4 well ToolContainer">

        <!--div class="input-group">
            <input type="text" class="input-block-level" placeholder="Rechercher (Numero de piece)">
            <span class="input-group-btn">
                <a class="btn" href="#"><i class="icon-search"></i></a>
            </span>
        </div-->

        <!--fieldset>
            <div class="input-append">
                <input type="text" class="input-block-level" placeholder="Rechercher (Numero de piece)">
                <button class="btn" type="button"><i class="icon-search"></i></button>
            </div>
        </fieldset-->

        <input type="text" class="form-control" placeholder="Rechercher (Numero de piece)" ng-model="txtFilter" ng-keypress="UnveilImg()" />

        <div style="padding-top: 1em">
            <h4>Affichage</h4>
            <div style="padding-left: 1em;">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="chkNumPiece" ng-init="chkNumPiece=true"> Numéros pièces
                    </label>
                </div>
                <div class="checkbox" style="display:none">
                    <label>
                        <input type="checkbox" ng-model="chkRefPhotos"  ng-init="chkRefPhotos=true"> Références photos
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="chkIconPhotos" ng-init="chkIconPhotos=false" ng-click="UnveilImg()"> Photos
                    </label>
                </div>
            </div>
        </div>

        <!-- TODO: add Collections -->
        <div style="padding-top: 1em; display: none;">
            <h4>Collections</h4>
            <div style="padding-left: 1em;">

                <!--div class="btn-group">
                    <a class="btn btn-inverse dropdown-toggle" data-toggle="dropdown" href="#">
                        Collections
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                        <li><a tabindex="-1" href="#">Desactiver</a></li>
                        <li class="divider"></li>
                        <li><a tabindex="-1" href="#">Collection 1</a></li>
                        <li><a tabindex="-1" href="#">Collection 2</a></li>
                        <li class="divider"></li>
                        <li><a tabindex="-1" href="#">Creer une collection</a></li>
                    </ul>
                </div-->

                <!--fieldset>
                    <div class="input-append">
                        <input type="text">
                        <div class="btn-group">
                            <a class="btn btn-inverse dropdown-toggle" data-toggle="dropdown" href="#">
                                Collections
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                <li><a tabindex="-1" href="#">Desactiver</a></li>
                                <li class="divider"></li>
                                <li><a tabindex="-1" href="#">Collection 1</a></li>
                                <li><a tabindex="-1" href="#">Collection 2</a></li>
                                <li class="divider"></li>
                                <li><a tabindex="-1" href="#">Creer une collection</a></li>
                            </ul>

                        </div>
                    </div>
                </fieldset-->

                <!-- for drop down, try http://plnkr.co/edit/cs4FLN?p=preview -->
                <!--select ng-controller="selectionsCtrl" class="form-control btn-block">
                    <option>Collections désactivées</option>
                    <option disabled>------------</option>
                    <option ng-repeat="selection in selections">{{selection.name}}</option>
                    <option disabled>------------</option>
                    <option>Créer une collection</option>
                </select-->
                <div class="checkbox">
                    <label>
                        <input type="checkbox"> Afficher uniquement la selection
                    </label>
                </div>
            </div>
        </div>

    </div>

    <!-- TODO: img tooltip, add popover http://getbootstrap.com/javascript/#popovers -->
    <!-- TODO: add scroll bar: http://stackoverflow.com/questions/21168521/scrollable-table-with-fixed-header-in-bootstrap -->
    <div class="col-md-offset-4 col-md-8 ListContainer" cg-busy="{promise:listPromise,message:'Chargement',templateUrl:'partials/waiting.html'}">
        <table ng-controller="catalogueCtrl" class="table table-bordered table-striped">
            <thead>
            <tr>
                <th ng-if="chkNumPiece">Pièce</th>
                <th ng-if="chkRefPhotos">Photos</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="ceramique in ceramiques|filter:{refPiece:txtFilter}" OFFmy-repeat-directive>
                <td ng-if="chkNumPiece" width='1%'>
                    <!--div class="checkbox">
                        <label><input type="checkbox" ng-model="ceramique.collection" ng-change="selectionChanged(ceramique.refPiece)">{{ceramique.refPiece}}</label>
                    </div-->
                    {{ceramique.refPiece}}
                </td>
                <td ng-if="!chkIconPhotos">
                    <span ng-repeat="photo in ceramique.listPhotos">
                        {{photo.nomFichier}}<br/>
                    </span>
                </td>
                <td ng-if="chkIconPhotos">
                    <div class="pull-left" ng-repeat="photo in ceramique.listPhotos">
                        <p class="muted">
                            <!--img src="{{ceramiques.photoPath}}/repo?img={{photo.nomFichier}}" title="{{photo.nomFichier}}"/-->
                            <img src="img/loading.jpg" data-src="{{ceramiques.photoPath}}/repo?img={{photo.nomFichier}}" title="{{photo.nomFichier}}"/>
                        </p>
                        <div class="dropdown clearfix">
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" styleOFF="display: block; position: static; margin-bottom: 5px; *width: 180px;">
                                <li><a tabindex="-1" href="#">{{photo.nomFichier}}</a></li>
                                <li class="divider"></li>
                                <li><a tabindex="-1" href="#">Download</a></li>
                            </ul>
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

    </div>
</div>


